settings:
  default_pipeline_ctrl_msg_channel_size: 100
  default_node_ctrl_msg_channel_size: 100
  default_pdata_channel_size: 100

nodes:
  receiver:
    kind: receiver
    plugin_urn: "urn:otel:otap:fake_data_generator:receiver"
    out_ports:
      out_port:
        destinations:
          - exporter
        dispatch_strategy: round_robin
    config:
      traffic_config:
        max_batch_size: 1000
        signals_per_second: 75000
        log_weight: 100
      registry_path: https://github.com/open-telemetry/semantic-conventions.git[model]

  {% if loadgen_exporter_type == "otap" %}
  exporter:
    kind: exporter
    plugin_urn: "urn:otel:otap:exporter"
    config:
      grpc_endpoint: "http://{{engine_hostname}}:4317"
      compression_method: zstd
  {% elif loadgen_exporter_type == "otlp" %}
  exporter:
    kind: exporter
    plugin_urn: "urn:otel:otlp:exporter"
    config:
      grpc_endpoint: "http://{{engine_hostname}}:4317"
      compression_method: gzip
  {% else %}
  exporter:
    kind: exporter
    # Default or error receiver config
    plugin_urn: "urn:unknown:receiver:{{ loadgen_exporter_type }}"
    config:
      error: "Unknown loadgen_exporter_type: {{ loadgen_exporter_type }}"
  {% endif %}
